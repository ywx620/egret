var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,r){function s(t){try{h(n.next(t))}catch(e){r(e)}}function a(t){try{h(n["throw"](t))}catch(e){r(e)}}function h(t){t.done?o(t.value):new i(function(e){e(t.value)}).then(s,a)}h((n=n.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(o)throw new TypeError("Generator is already executing.");for(;h;)try{if(o=1,r&&(s=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[0,s.value]),i[0]){case 0:case 1:s=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,r=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(s=h.trys,!(s=s.length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){h.label=i[1];break}if(6===i[0]&&h.label<s[1]){h.label=s[1],s=i;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(i);break}s[2]&&h.ops.pop(),h.trys.pop();continue}i=e.call(t,h)}catch(n){i=[6,n],r=0}finally{o=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var o,r,s,a,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i){function n(n){e.call(i,n,t)}if(RES.hasRes(t)){var o=RES.getRes(t);o?n(o):RES.getResAsync(t,n,this)}else RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.onProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var Main=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return[4,this.loadResource()];case 1:return i.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return t=i.sent(),[4,platform.login()];case 3:return i.sent(),[4,platform.getUserInfo()];case 4:return e=i.sent(),[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),t=new LoadingUI,this.stage.addChild(t),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return i.sent(),[4,this.loadTheme()];case 2:return i.sent(),[4,RES.loadGroup("preload",0,t)];case 3:return i.sent(),this.stage.removeChild(t),[3,5];case 4:return e=i.sent(),console.error(e),[3,5];case 5:return[2]}})})},e.prototype.loadTheme=function(){var t=this;return new Promise(function(e,i){var n=new eui.Theme("resource/default.thm.json",t.stage);n.addEventListener(eui.UIEvent.COMPLETE,function(){e()},t)})},e.prototype.createGameScene=function(){moon.showLog.getIns().init(this.stage),this.addChild(new Puzzle)},e}(eui.UILayer);__reflect(Main.prototype,"Main");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,n){function o(t){e.call(n,t)}function r(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),i.call(n))}"undefined"!=typeof generateEUI?egret.callLater(function(){e.call(n,generateEUI)},this):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(t,o,this,RES.ResourceItem.TYPE_TEXT))},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var Puzzle=function(t){function e(){var e=t.call(this)||this;return e.images=[],e.checkImages=[],e.rightOrder="",e.step=0,e.addEventListener(egret.Event.ADDED_TO_STAGE,e.addToStage,e),e}return __extends(e,t),e.prototype.addToStage=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.addToStage,this);for(var t=RES.getRes("bg_jpg"),e=new egret.SpriteSheet(t),i=3,n=640/i,o=Math.floor(1136/n),r=i*o,s=0;r>s;s++){var a=Math.floor(s%i)*n,h=Math.floor(s/i)*n;e.createTexture("part",a,h,n,n);var c=e.getTexture("part"),l=new egret.Bitmap;l.name=s+"",this.rightOrder+=l.name,l.texture=c,this.images.push(l),this.addChild(l)}this.images=ArrayManager.getRandomArray(this.images),LayoutManager.displayRank(this.images,i,0,0,0,35),this.addChild(moon.MoonUI.getRect(640,35,3368550)),this.imaWidth=n,this.coltrolMove=new control.ControlFingerMove(this.stage),this.coltrolMove.open(),this.coltrolMove.startBackFun=this.hitImage.bind(this),this.coltrolMove.moveEndBackFun=this.moveEnd.bind(this),this.setStep()},e.prototype.setStep=function(){simpleTrace("步数:"+this.step++)},e.prototype.moveEnd=function(t){if(1==this.checkImages.length)for(var e=this.checkImages[0],i=this.images.length,n=0;i>n;n++){var o=this.images[n];if(e!=o)if(0!=t.x){if(o.y==e.y){var r=Math.floor(o.x-e.x);if(r==Math.floor(this.imaWidth*t.x)){this.checkImages.push(o);break}}}else if(o.x==e.x){var r=Math.floor(o.y-e.y);if(r==Math.floor(this.imaWidth*t.y)){this.checkImages.push(o);break}}}this.checkResult()},e.prototype.hitImage=function(t){for(var e=this.images.length,i=0;e>i;i++){var n=this.images[i];if(n.hitTestPoint(t.x,t.y)){this.checkImages.push(n);break}}this.checkResult()},e.prototype.checkResult=function(){if(2==this.checkImages.length){var t=this.checkImages[0],e=this.checkImages[1];if(t!=e){this.coltrolMove.close();var i=t.x,n=t.y,o=e.x,r=e.y,s=i-o,a=n-r,h=Math.floor(Math.sqrt(s*s+a*a));if(h<=this.imaWidth){var c=egret.Tween.get(t),l=egret.Tween.get(e);c.to({x:o,y:r},150).call(this.callback,this),l.to({x:i,y:n},150);var d=this.images.indexOf(t),u=this.images.indexOf(e);this.images.splice(d,1,e),this.images.splice(u,1,t)}}this.checkImages.length=0}},e.prototype.callback=function(){this.setStep();for(var t=this.images.length,e="",i=0;t>i;i++){var n=this.images[i];e+=n.name}this.rightOrder==e?simpleTrace("一共用了"+this.step+"步完成"):this.coltrolMove.open()},e}(egret.DisplayObjectContainer);__reflect(Puzzle.prototype,"Puzzle");var trace=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=0;i<t.length;i++)moon.showLog.getIns().logMessage(t[i])},simpleTrace=function(t){moon.showLog.getIns().log(t)},moon;!function(t){var e=function(){function t(){}return Object.defineProperty(t,"randomColor",{get:function(){return 16777215*Math.random()},enumerable:!0,configurable:!0}),t.getRect=function(t,e,i,n,o){void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0);var r=new egret.Sprite;return r.graphics.beginFill(i),r.graphics.drawRect(n,o,t,e),r.graphics.endFill(),r},t.getRectAndX=function(t,e,i,n,o){void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0);var r=this.getRect(t,e,i,n,o),s=new egret.Sprite;s.graphics.lineStyle(.1),s.graphics.moveTo(0,0),s.graphics.lineTo(t,e);var a=new egret.Sprite;return a.graphics.lineStyle(.1),a.graphics.moveTo(t,0),a.graphics.lineTo(0,e),r.addChild(s),r.addChild(a),r},t.getRoundRect=function(t,e,i,n,o,r,s){void 0===i&&(i=0),void 0===n&&(n=5),void 0===o&&(o=5),void 0===r&&(r=0),void 0===s&&(s=0);var a=new egret.Sprite;return a.graphics.beginFill(i),a.graphics.drawRoundRect(r,s,t,e,n,o),a.graphics.endFill(),a},t.getCircle=function(t,e,i,n){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0);var o=new egret.Sprite;return o.graphics.beginFill(e),o.graphics.drawCircle(i,n,t),o.graphics.endFill(),o},t.getPolygon=function(t,e,i,n){void 0===t&&(t=3),void 0===e&&(e=10),void 0===i&&(i=0),void 0===n&&(n=0);var o=new egret.Sprite;o.rotation=n,o.graphics.beginFill(i);for(var r=0;t>=r;r++){var s=Math.cos(r*(360/t)*Math.PI/180)*e,a=Math.sin(r*(360/t)*Math.PI/180)*e;0==r?o.graphics.moveTo(s,a):o.graphics.lineTo(s,a)}return o.graphics.endFill(),o},t.getArrowRoundRect=function(t,e,i,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var r=new egret.Sprite;r.addChild(this.getRoundRect(t,e,i));var s=this.getPolygon(3,t/3,n,30+o);return s.x=r.width>>1,s.y=r.height>>1,r.addChild(s),r},t.getScrollLineBar=function(t,e,i){for(var n=new egret.Sprite,o=e/3,r=0;3>r;r++){var s=this.getRect(t,1,i,0,r*o);n.addChild(s)}return n},t.getAddRoundRect=function(t,e,i){var n=new egret.Sprite;n.addChild(this.getRoundRect(t,e,i));var o=this.getRect(t/2,2,0,t/4,e/2-1),r=this.getRect(2,e/2,0,t/2-1,e/4);return n.addChild(o),n.addChild(r),n},t.getRemoveRoundRect=function(t,e,i){var n=new egret.Sprite;n.addChild(this.getRoundRect(t,e,i));var o=this.getRect(t/2,2,0,t/4,e/2-1);return n.addChild(o),n},t.getRoundRectText=function(t,e,i,n){void 0===n&&(n="click");var o=new egret.Sprite;o.addChild(this.getRoundRect(t,e,i));var r=new egret.TextField;return r.text=n,r.x=o.width-r.width>>1,r.y=o.height-r.height>>1,o.addChild(r),o},t.getCheckBoxRect=function(t,e,i){void 0===t&&(t=16777215),void 0===e&&(e=0),void 0===i&&(i=0);var n=new egret.Sprite;if(n.addChild(this.getRect(20,20,t)),1==i){var o=new egret.Sprite;o.graphics.beginFill(e),o.graphics.moveTo(0,10),o.graphics.lineTo(10,18),o.graphics.lineTo(22,4),o.graphics.lineTo(18,0),o.graphics.lineTo(10,9),o.graphics.lineTo(6,4),o.graphics.lineTo(0,10),n.addChild(o)}return n},t.getRadioCircle=function(t,e,i){void 0===t&&(t=16777215),void 0===e&&(e=0),void 0===i&&(i=0);var n=new egret.Sprite;if(n.addChild(this.getCircle(9,t,9,9)),1==i){var o=this.getCircle(5,e,9,9);n.addChild(o)}return n},t.getGridding=function(t,e){void 0===e&&(e=0);var i=new egret.Sprite;i.graphics.lineStyle(.1,e);for(var n=t.width/t.x,o=t.height/t.y,r=0;r<t.x;r++)i.graphics.moveTo(0,r*o),i.graphics.lineTo(t.width,r*o);for(r=0;r<t.y;r++)i.graphics.moveTo(r*n,0),i.graphics.lineTo(r*n,t.height);return i},t}();t.MoonUI=e,__reflect(e.prototype,"moon.MoonUI");var i=function(){function t(){}return t.getIns=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.init=function(t){var e=new egret.TextField;e.textAlign=egret.HorizontalAlign.LEFT,t.addChild(e),this.txtSimple=e;var e=new egret.TextField;e.size=25,t.addChild(e),this.txtMessage=e},t.prototype.log=function(t){this.txtSimple.text=t},t.prototype.logMessage=function(t){this.txtMessage.appendText(t+"\n")},t}();t.showLog=i,__reflect(i.prototype,"moon.showLog");var n=function(){function e(){}return e.getIns=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.init=function(t){this.stage=t},e.prototype.simpleTips=function(e,i){null==this.tipsView&&(this.tipsView=new t.BasicTips("tips_png"),this.tipsView.setValue(e),this.stage.addChild(this.tipsView),this.setPosition(i),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.removeTips,this))},e.prototype.setPosition=function(t){t&&(this.tipsView.x=t.x-(this.tipsView.width>>1),this.tipsView.y=t.y-2*this.tipsView.height,this.tipsView.y<0&&(this.tipsView.x=t.x+50,this.tipsView.y=t.y),this.tipsView.x<0&&(this.tipsView.x=t.x+50,this.tipsView.y=t.y),this.tipsView.x+this.tipsView.width>this.stage.stageWidth&&(this.tipsView.x=t.x-(this.tipsView.width+50),this.tipsView.y=t.y))},e.prototype.removeTips=function(){this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.removeTips,this);var t=this.tipsView.parent;null!=t&&(t.removeChild(this.tipsView),this.tipsView=null)},e}();t.TipsManager=n,__reflect(n.prototype,"moon.TipsManager");var o=function(t){function e(e,i,n){void 0===e&&(e=""),void 0===i&&(i=null),void 0===n&&(n=null);var o=t.call(this)||this;return o.type=e,o.data=i,o.currentTarget=n,o}return __extends(e,t),e.MOUSE_OVER="event-over",e.MOUSE_OUT="event-out",e.MOUSE_DOWN="event-down",e.MOUSE_UP="event-up",e.CLICK="event-click",e.CHANGE="change",e.COMPLETE="complete",e.UPDATE="update",e.CHANGE_ROLE="change role",e}(egret.EventDispatcher);t.MoonEvent=o,__reflect(o.prototype,"moon.MoonEvent");var r=function(t){function e(){var e=t.call(this)||this;return e.dataEvent=new Object,e.init(),e.addEventListener(egret.Event.ADDED_TO_STAGE,e.addToStage,e),e}return __extends(e,t),e.prototype.addToStage=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.addToStage,this),this.render()},e.prototype.init=function(){},e.prototype.render=function(){},e.prototype.newDispatchEvent=function(t,e,i){if(void 0===e&&(e=null),void 0===i&&(i=null),this.dataEvent){var n=this.dataEvent[t];if(null!=n){var r=new o;r.currentTarget=this,r.data=e,r.type=t,r.dataType=i,n(r)}}},e.prototype.newAddEventListener=function(t,e){this.dataEvent&&null==this.dataEvent[t]&&(this.dataEvent[t]=e)},e.prototype.newRemoveEventListener=function(t,e){this.dataEvent&&this.dataEvent[t]&&delete this.dataEvent[t]},e}(egret.DisplayObjectContainer);t.MoonContainer=r,__reflect(r.prototype,"moon.MoonContainer");var s=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.createText=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i="");var n=new egret.TextField;return n.x=t,n.y=e,n.text=i,this.addChild(n),n},i.prototype.createRect=function(e,i,n,o,r){void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=0);var s=t.MoonUI.getRect(e,i,n,o,r);return this.addChild(s),s},i.prototype.createCircle=function(e,i,n,o){void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0);var r=t.MoonUI.getCircle(e,i,n,o);return this.addChild(r),r},i}(r);t.BasicView=s,__reflect(s.prototype,"moon.BasicView");var a=function(e){function i(t,i,n){void 0===n&&(n=-1);var o=e.call(this)||this;return o.rect=t,o.house=i,o.color=n,o}return __extends(i,e),i.prototype.render=function(){var e=this.house,i=t.MoonUI.getRect(this.rect.width,this.rect.height);i.alpha=.1,this.addChild(i);for(var n=this.rect.width/e.width,o=0,r=0;n>r;r++){var s=-1==this.color?16777215*Math.random():this.color,a=e.width+Math.random()*e.x,h=e.height+Math.random()*e.y,c=t.MoonUI.getRect(a,h,s);this.addChild(c),c.y=this.rect.height-c.height,c.x=o,o=c.x+c.width}},i}(r);t.MapHorizontalHouse=a,__reflect(a.prototype,"moon.MapHorizontalHouse");var h=function(t){function e(e){var i=t.call(this)||this;return i.image=new eui.Image(e),i.image.scale9Grid=new egret.Rectangle(4,4,2,2),i.addChild(i.image),i}return __extends(e,t),e.prototype.setSize=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),t>0&&(this.image.width=t),e>0&&(this.image.height=e)},e}(r);t.Scale9Image=h,__reflect(h.prototype,"moon.Scale9Image");var c=function(t){function e(e){var i=t.call(this)||this;return i.side=14,i.lineSpacing=4,i.image=new h(e),i.addChild(i.image),i.text=new egret.TextField,i.text.textAlign=egret.HorizontalAlign.CENTER,i.text.verticalAlign=egret.VerticalAlign.MIDDLE,i.text.lineSpacing=i.lineSpacing,i.addChild(i.text),i}return __extends(e,t),e.prototype.setValue=function(t){this.text.text=t,this.setCenter()},e.prototype.setTextFlow=function(t){this.text.textFlow=t,this.setCenter()},e.prototype.setCenter=function(){var t=this.image,e=this.text,i=this.side,n=e.width+i,o=e.height+i;t.setSize(n,o),e.x=e.y=i>>1},e}(r);t.BasicTips=c,__reflect(c.prototype,"moon.BasicTips")}(moon||(moon={}));var ArrayManager=function(){function t(){}return t.getRandomArray=function(t){for(var e=[],i=t.concat();i.length>0;){var n=Math.floor(Math.random()*i.length);e.push(i.splice(n,1)[0])}return e},t}();__reflect(ArrayManager.prototype,"ArrayManager");var control;!function(t){var e=function(){function t(t){this.stage=t}return t.prototype.open=function(){this.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this)},t.prototype.close=function(){this.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this)},t.prototype.onTouch=function(t){switch(t.type){case egret.TouchEvent.TOUCH_BEGIN:this.controlStart();break;case egret.TouchEvent.TOUCH_MOVE:this.controlMove(t.stageX,t.stageY);break;case egret.TouchEvent.TOUCH_END:this.controlEnd()}},t.prototype.controlStart=function(){this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this)},t.prototype.controlMove=function(t,e){},t.prototype.controlEnd=function(){this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this)},t}();t.ControlBasic=e,__reflect(e.prototype,"control.ControlBasic");var i=function(t){function e(e,i,n){var o=t.call(this,e)||this;return o.controlBar=i,o.controlBg=n,o}return __extends(e,t),e.prototype.controlMove=function(t,e){var i=this.controlBg,n=this.controlBar,o=i.x,r=i.y,s=t-o,a=e-r,h=Math.sqrt(s*s+a*a),c=i.width>>1,l=s/h,d=a/h;c>h?(n.x=t,n.y=e):(n.x=o+l*c,n.y=r+d*c)},e.prototype.controlEnd=function(){this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this);var t=this.controlBg,e=this.controlBar;e.x=t.x,e.y=t.y},e}(e);t.ControlBarMove=i,__reflect(i.prototype,"control.ControlBarMove");var n=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.onTouch=function(t){switch(t.type){case egret.TouchEvent.TOUCH_BEGIN:this.posStart=new egret.Point(t.stageX,t.stageY),this.controlStart();break;case egret.TouchEvent.TOUCH_MOVE:this.controlMove(t.stageX,t.stageY);break;case egret.TouchEvent.TOUCH_END:this.posEnd=new egret.Point(t.stageX,t.stageY),this.controlEnd()}},e.prototype.controlStart=function(){t.prototype.controlStart.call(this),null!=this.startBackFun&&this.startBackFun(this.posStart)},e.prototype.controlMove=function(t,e){},e.prototype.controlEnd=function(){this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this);var t=this.posEnd.x-this.posStart.x,e=this.posEnd.y-this.posStart.y,i=new egret.Point(0,0);Math.abs(t)>Math.abs(e)?i.x=t>0?1:-1:i.y=e>0?1:-1,null!=this.endBackFun&&this.endBackFun(this.posEnd),null!=this.moveEndBackFun&&this.moveEndBackFun(i)},e}(e);t.ControlFingerMove=n,__reflect(n.prototype,"control.ControlFingerMove");var o=function(t){function e(e,i){var n=t.call(this,e)||this;return n.display=i,n.distance=new egret.Point,n}return __extends(e,t),e.prototype.open=function(){this.display.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this)},e.prototype.close=function(){this.display.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this)},e.prototype.onTouch=function(e){switch(t.prototype.onTouch.call(this,e),e.type){case egret.TouchEvent.TOUCH_BEGIN:this.distance.x=e.stageX-this.display.x,this.distance.y=e.stageY-this.display.y}},e.prototype.controlMove=function(t,e){this.display.x=t-this.distance.x,this.display.y=e-this.distance.y},e.prototype.controlEnd=function(){t.prototype.controlEnd.call(this),null!=this.endBackFun&&this.endBackFun()},e}(e);t.ControlDrag=o,__reflect(o.prototype,"control.ControlDrag")}(control||(control={}));var LayoutManager=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.displayRank=function(t,e,i,n,o,r,s){void 0===e&&(e=1),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=0),void 0===s&&(s=1);for(var a,h=0;h<t.length;h++)a=t[h],a.x=o+Math.floor(h%e)*(a.width+i)*s,a.y=r+Math.floor(h/e)*(a.height+n)*s},e.displayRankPart=function(t,i,n,o){void 0===n&&(n=null),void 0===o&&(o=1);var r,s,a,h,c,l,d;r=i[0],a=i[1],h=i[2],c=i[3],l=i[4],d=i[5];var u=t.slice(0,r);if(e.displayRank(u,a,h,c,l,d,o),n){s=n[0],a=n[1],h=n[2],c=n[3],l=n[4],d=n[5];var p=t.slice(r,r+s);e.displayRank(p,a,h,c,l,d,o)}},e.displayCircle=function(t,e,i,n,o,r,s,a,h,c){void 0===o&&(o=2*Math.PI),void 0===r&&(r=0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===h&&(h=0),void 0===c&&(c=0);var l,d=t.length,u=o/d;o<2*Math.PI&&(u=o/(d-1));for(var p=0;d>p;p++)l=t[p],l.x=e+Math.cos(u*p-r)*(n+h)+s,l.y=i+Math.sin(u*p-r)*(n+c)+a},e.displayPolygon=function(t,e,i,n,o,r){if(void 0===n&&(n=100),void 0===o&&(o=5),void 0===r&&(r=0),3>o||o>t.length)return void console.log("多边形的边数不正确");for(var s,a=t.length,h=2*Math.PI/o,c=Math.floor(a/o),l=0;o>l;l++){var d=e+Math.cos(l*h-r)*n,u=i+Math.sin(l*h-r)*n,p=l+1;p=p==o?0:p;for(var g=e+Math.cos(p*h-r)*n,v=i+Math.sin(p*h-r)*n,f=0;c>f;f++){var y=f+c*l;a>y&&(s=t[y],s.x=d,s.y=u,s.x+=(g-d)/c*f,s.y+=(v-u)/c*f)}}},e.displayTrigon=function(t,e,i,n,o,r,s){function a(){var p=0,g=u.length;g>1&&s&&(p=(g-1)*(h.width+e)/-2*r);for(var v=0;g>v;v++)h=u[v],h.x=n+v*(h.width+e)*r+p,h.y=o+(d-1)*(h.height+i)*r;d++,c=l,l=c+d,u=t.slice(c,l),l<=t.length+c&&a()}void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=1),void 0===s&&(s=!0);var h,c=0,l=1,d=1,u=t.slice(c,l);a()},e.displayWall=function(t,e,i,n,o,r,s){void 0===e&&(e=1),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=0),void 0===s&&(s=10);for(var a,h=0;h<t.length;h++){var c=Math.floor(h/e)%2==0?s:0;a=t[h],a.x=o+Math.floor(h%e)*(a.width+i)+c,a.y=r+Math.floor(h/e)*(a.height+n)}},e.displayRankX=function(t,e,i,n,o){void 0===e&&(e=1),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0);for(var r,s=t.length,a=0,h=0;s>h;h++){r=t[h];r.width;r.y=o,r.x=a,a=r.x+(r.width+i)}},e}(egret.HashObject);__reflect(LayoutManager.prototype,"LayoutManager");